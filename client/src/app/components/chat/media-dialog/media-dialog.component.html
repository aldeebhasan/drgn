<div
    *ngIf="showDialog"
    class="media-dialog-overlay fixed inset-0 z-50 flex items-center justify-center bg-black/70 transition-opacity duration-300 overflow-auto"
>
    <div class="media-dialog-content relative bg-black/20 rounded-lg shadow-xl max-w-[90vw]">
        <!-- Close button -->
        <button
            (click)="close()"
            class="absolute top-2 right-2 z-10 p-1 rounded-full bg-gray-900 text-white hover:bg-opacity-100 transition-all cursor-pointer"
            aria-label="Close media dialog"
        >
            <app-icon name="close" class="fill-gray-200" />
        </button>

        <!-- Media content -->
        <div class="p-4 flex items-center justify-center h-full relative">
            <span class="absolute top-6 left-6">{{ media?.name }}</span>
            <!-- Image -->
            <div *ngIf="media?.type === 'image'" class="max-h-[85vh] max-w-[90vw">
                <img [src]="media?.path" alt="Media content" class="max-h-full max-w-full rounded object-contain" #mediaElement />
            </div>

            <!-- Video -->
            <div *ngIf="media?.type === 'video'" class="w-full">
                <video controls class="max-h-[85vh] max-w-[90vw] rounded" #mediaElement>
                    <source [src]="media?.path" [type]="getVideoType()" />
                    Your browser does not support videos.
                </video>
            </div>

            <!-- Audio -->
            <div *ngIf="media?.type === 'audio'" class="w-full max-w-md">
                <audio controls class="w-full" #mediaElement>
                    <source [src]="media?.path" [type]="getAudioType()" />
                    Your browser does not support audio.
                </audio>
            </div>
        </div>
    </div>
</div>
